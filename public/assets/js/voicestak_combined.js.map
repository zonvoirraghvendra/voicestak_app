{"version":3,"sources":["voicestak_combined.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"voicestak_combined.js","sourcesContent":["function getParentUrl() {\n    var isInIframe = (parent !== window),\n        parentUrl = null;\n\n    if (isInIframe) {\n        parentUrl = document.referrer;\n    }\n\n    return parentUrl;\n}\n\nvar parent_url = getParentUrl();\n\nvar isEdge = false; // todo find out where this would come from\n\nvar isFirefox = !!navigator.mozGetUserMedia;\nvar isOpera = !!window.opera || navigator.userAgent.indexOf('OPR/') !== -1;\nvar isChrome = !isOpera && !isEdge && !!navigator.webkitGetUserMedia;\n\n\n\n\nif (parent_url.indexOf('https') > -1) {\n\n    // todo record audio only\n    // todo record video and audio\n\n\n    //Voicemessage.js\n    var leftchannel = [];\n    var rightchannel = [];\n    var recorder = null;\n    var recording = false;\n    var recordingLength = 0;\n    var volume = null;\n    var audioInput = null;\n    var sampleRate = null;\n    var audioContext = null;\n    var context = null;\n    var outputElement = document.getElementById('output');\n    var outputString;\n    var audioMessage;\n    var audiostorage = \"/uploads/audio/\";\n    var isFirefox = !!navigator.mozGetUserMedia;\n    var first = true;\n\n    $('#popup18 .btn-popup,#popup2 .btn-popup,#popup30 .start-video').click(function(){\n        if($('.check_domain').val() === 'true') {\n            $('#popup20 #play').hide();\n            $('#popup4 #play').hide();\n            $('#popup32 #play').hide();\n\n            // var mediaConstraints = {\n            //     audio: true\n            // };\n\n            // if (!navigator.getUserMedia){\n            //     navigator.getUserMedia = navigator.getUserMedia || navigator.webkitGetUserMedia || navigator.mozGetUserMedia || navigator.msGetUserMedia;\n            // }\n\n            // navigator.getUserMedia(mediaConstraints, onMediaSuccess, onMediaError);\n\n            if (!navigator.getUserMedia)\n                navigator.getUserMedia = navigator.getUserMedia || navigator.webkitGetUserMedia || navigator.mozGetUserMedia || navigator.msGetUserMedia;\n            if (navigator.getUserMedia){\n                navigator.getUserMedia({audio:true}, success , function(e) {\n                    alert('Error capturing audio.');\n                });\n            } else alert('getUserMedia not supported in this browser.');\n        }\n    });\n\n    function onMediaSuccess(stream) {\n        // if(!isFirefox){\n\n        //     mediaRecorder = new MediaStreamRecorder(stream);\n        //     mediaRecorder.mimeType = 'audio/wav';\n        //     mediaRecorder.audioChannels = 1;\n        //     mediaRecorder.ondataavailable = function (blob) {\n        //         audioMessage = blob;\n        //     };\n        mediaRecorder = new MultiStreamRecorder(stream);\n        mediaRecorder.video = video;\n        mediaRecorder.ondataavailable = function (blobs) {\n            audioMessage = blobs.audio;\n            videoMessage = blobs.video;\n        };\n        // } else {\n        //     recordRTC = RecordRTC(stream);\n        // }\n\n        $('#popup20 #play').show();\n        $('#popup4 #play').show();\n        $('#popup32 #play').show();\n    }\n\n    function onMediaError(e) {\n        alert('Oops!!! You have a problem with Your camera or You don\\'t have permissions to use it!!!');\n    }\n\n    var isPaused = false;\n    var seconds1 = 0;\n    var seconds2 = 0;\n    var minutes = 0;\n    var message_length = '0:00';\n    if($('#record_length').length !== 0) {\n        document.getElementById(\"record_length\").innerHTML = message_length;\n    }\n\n    function func() {\n        seconds2++;\n        if(seconds2 == 10){\n            seconds2 = 0;\n            seconds1++;\n        }\n        if(seconds1 == 6){\n            seconds1 = 0;\n            minutes++;\n        }\n        message_length = minutes+\":\"+seconds1+seconds2;\n        document.getElementById(\"record_length\").innerHTML = message_length;\n    }\n    if (typeof $.timer != 'undefined'){\n        var timer = $.timer(func, 1000, true);\n        timer.stop();\n    }\n    $(\".play\").on('click', function(){\n        if($('.check_domain').val() === 'true') {\n            document.getElementById('play').style.display = 'none';\n            document.getElementById('stop').style.display = 'inline-block';\n\n            timer.play();\n            recording = true;\n            if($('.is_premium').val() == false){\n                if(first)\n                    setTimeout(getAudio, 300000);\n                first = true;\n            } else {\n                if(first)\n                    setTimeout(getAudio, 600000);\n                first = true;\n            }\n        }\n    });\n// $(\".pause\").on('click', function(){\n//     if($('.check_domain').val() === 'true') {\n//         document.getElementById('pause').style.display = 'none';\n//         document.getElementById('play').style.display = 'inline-block';\n//         timer.pause();\n//         /*isPaused = true;*/\n//         recording = false;\n//     }\n// });\n\n\n    function getAudio(){\n        first = false;\n        if($('.check_domain').val() === 'true') {\n            $('.display_div').hide();\n            $('.display_div:nth-child(5)').show();\n        }\n        // if(!isFirefox)\n        //     mediaRecorder.stop();\n        // else{\n        //     recordRTC.stopRecording(function(videoURL) {\n        //         audioMessage = recordRTC.getBlob();\n        //     });\n        // }\n        timer.stop();\n        // document.getElementById('pause').style.display = 'none';\n        document.getElementById('play').style.display = 'inline-block';\n        recording = false;\n\n        var leftBuffer = mergeBuffers ( leftchannel, recordingLength );\n        var rightBuffer = mergeBuffers ( rightchannel, recordingLength );\n        var interleaved = interleave ( leftBuffer, rightBuffer );\n\n        var buffer = new ArrayBuffer(44 + interleaved.length * 2);\n        var view = new DataView(buffer);\n\n        writeUTFBytes(view, 0, 'RIFF');\n        view.setUint32(4, 44 + interleaved.length * 2, true);\n        writeUTFBytes(view, 8, 'WAVE');\n        writeUTFBytes(view, 12, 'fmt ');\n        view.setUint32(16, 16, true);\n        view.setUint16(20, 1, true);\n        view.setUint16(22, 2, true);\n        view.setUint32(24, sampleRate, true);\n        view.setUint32(28, sampleRate * 4, true);\n        view.setUint16(32, 4, true);\n        view.setUint16(34, 16, true);\n        writeUTFBytes(view, 36, 'data');\n        view.setUint32(40, interleaved.length * 2, true);\n\n        var lng = interleaved.length;\n        var index = 44;\n        var volume = 1;\n        for (var i = 0; i < lng; i++){\n            view.setInt16(index, interleaved[i] * (0x7FFF * volume), true);\n            index += 2;\n        }\n\n        var blob = new Blob ( [ view ], { type : 'audio/wav' } );\n\n        var xhr=new XMLHttpRequest();\n\n        var fd = new FormData();\n\n        fd.append(\"file\",blob);\n\n        xhr.open(\"POST\",\"/messages/upload-file\");\n\n        $(\"#spanimg\").css(\"display\", \"inline-block\");\n\n        xhr.onreadystatechange = function() {\n            if (xhr.readyState != 4) return;\n\n            if (xhr.status != 200) {\n                alert(\"An Error Occured.\");\n            } else {\n                $(\"#spanimg\").css(\"display\", \"none\");\n                $('#playing').show();\n                $('.hidden_div').show();\n\n                localStorage.message_length = message_length;\n                localStorage.fileName = JSON.parse(xhr.responseText).file_name;\n                localStorage.id = JSON.parse(xhr.responseText).id;\n                localStorage.file = audiostorage + JSON.parse(xhr.responseText).file_name;\n                $('#music').prop('src', localStorage.file);\n                document.getElementById('message_length').innerHTML = localStorage.message_length;\n\n                document.getElementById(\"file_name\").value = localStorage.fileName;\n                document.getElementById(\"duration\").value = localStorage.message_length;\n                document.getElementById('token').value = localStorage.token;\n                seconds1 = 0;\n                seconds2 = 0;\n                minutes = 0;\n                message_length = '0:00';\n                leftchannel.length = rightchannel.length = 0;\n                recordingLength = 0;\n\n            }\n        }\n\n        xhr.send(fd);\n    }\n\n    $(\".stop\").on('click', function(){\n        if($('.check_domain').val() === 'true') {\n            getAudio();\n        }\n    });\n\n    function interleave(leftChannel, rightChannel){\n        var length = leftChannel.length + rightChannel.length;\n        var result = new Float32Array(length);\n        var inputIndex = 0;\n        for (var index = 0; index < length; ){\n            result[index++] = leftChannel[inputIndex];\n            result[index++] = rightChannel[inputIndex];\n            inputIndex++;\n        }\n        return result;\n    }\n\n    function mergeBuffers(channelBuffer, recordingLength){\n        var result = new Float32Array(recordingLength);\n        var offset = 0;\n        var lng = channelBuffer.length;\n        for (var i = 0; i < lng; i++){\n            var buffer = channelBuffer[i];\n            result.set(buffer, offset);\n            offset += buffer.length;\n        }\n        return result;\n    }\n\n    function writeUTFBytes(view, offset, string){\n        var lng = string.length;\n        for (var i = 0; i < lng; i++){\n            view.setUint8(offset + i, string.charCodeAt(i));\n        }\n    }\n\n    function success(e){\n        audioContext = window.AudioContext || window.webkitAudioContext;\n        context = new audioContext();\n        sampleRate = context.sampleRate;\n\n        volume = context.createGain();\n        audioInput = context.createMediaStreamSource(e);\n        audioInput.connect(volume);\n        var bufferSize = 2048;\n        recorder = context.createScriptProcessor(bufferSize, 2, 2);\n\n        recorder.onaudioprocess = function(e){\n            if (!recording) return;\n            var left = e.inputBuffer.getChannelData (0);\n            var right = e.inputBuffer.getChannelData (1);\n            leftchannel.push (new Float32Array (left));\n            rightchannel.push (new Float32Array (right));\n            recordingLength += bufferSize;\n        }\n        volume.connect (recorder);\n        recorder.connect (context.destination);\n\n        $('#popup20 #play').show();\n        $('#popup4 #play').show();\n        $('#popup32 #play').show();\n    }\n\n    //Videomessage.js\n    var videostorage = \"/uploads/video/\";\n    var mediaRecorder;\n    var recordRTC;\n    var audioMessage = \"\";\n    var videoMessage = \"\";\n    var video;\n    var first = true;\n    var isFirefox = !!navigator.mozGetUserMedia;\n\n    $('#popup7 .btn-popup,#popup13 .btn-popup,#popup25 .start-video').click(function() {\n        if($('.check_domain').val() === 'true') {\n            $('#popup9 #capture').hide();\n            $('#popup15 #capture').hide();\n            $('#popup27 #capture').hide();\n\n            var mediaConstraints = {\n                audio: true,\n                video: true\n            };\n\n            if (!navigator.getUserMedia) {\n                navigator.getUserMedia = navigator.getUserMedia || navigator.webkitGetUserMedia || navigator.mozGetUserMedia || navigator.msGetUserMedia;\n            }\n            navigator.getUserMedia(mediaConstraints, onMediaSuccess, onMediaError);\n        }\n    });\n\n    function onMediaSuccess(stream) {\n        if(stream.getVideoTracks().length == 0) {\n            alert('Error Capturing Video!!! Please check is camera connected or Have You a permission to use it!!!');\n            return false;\n        }\n        video = document.querySelector('video');\n        window.URL = window.URL || window.webkitURL || window.mozURL || window.msURL;\n        video.src = window.URL.createObjectURL(stream);\n        var options = {};\n\n        //if(!isFirefox) {\n        //    mediaRecorder = new MultiStreamRecorder(stream);\n        //    mediaRecorder.video = video;\n        //    mediaRecorder.audioChannels = 1;\n        //    mediaRecorder.ondataavailable = function (blobs) {\n        //        if(first){\n        //            audioMessage = blobs.audio;\n        //            videoMessage = blobs.video;\n        //            getVideo();\n        //        } else {\n        //            audioMessage = blobs.audio;\n        //            videoMessage = blobs.video;\n        //        }\n        //        first = true;\n        //    };\n        //} else {\n        recordRTC = RecordRTC(stream, options);\n        //}\n\n        $('#popup9 #capture').show();\n        $('#popup15 #capture').show();\n        $('#popup27 #capture').show();\n    }\n\n    function onMediaError(e) {\n        alert('Error Capturing Video!!! Please check is camera connected or Have You a permission to use it!!!');\n    }\n\n    var isPaused = false;\n    var seconds1 = 0;\n    var seconds2 = 0;\n    var minutes = 0;\n    var message_length = '0:00';\n\n    if($('#record_length').length !== 0) {\n        document.getElementById(\"record_length\").innerHTML = message_length;\n    }\n\n    function func() {\n        seconds2++;\n        if(seconds2 == 10){\n            seconds2 = 0;\n            seconds1++;\n        }\n\n        if(seconds1 == 6){\n            seconds1 = 0;\n            minutes++;\n        }\n\n        message_length = minutes+\":\"+seconds1+seconds2;\n        document.getElementById(\"record_length\").innerHTML = message_length;\n    }\n\n    if (typeof $.timer != 'undefined') {\n        var timer = $.timer(func, 1000, true);\n        timer.stop();\n    }\n\n    $(\"#capture\").on('click', function() {\n        if($('.check_domain').val() === 'true') {\n            document.getElementById('capture').style.display        =   'none';\n            document.getElementById('video-stop').style.display     =   'inline-block';\n            //if(!isFirefox) {\n            //    mediaRecorder.start(6000000);\n            //    if($('.is_premium').val() == false) {\n            //        setTimeout(getVideo, 300000);\n            //    } else {\n            //        setTimeout(getVideo, 600000);\n            //    }\n            //} else {\n            recordRTC.startRecording();\n            if($('.is_premium').val() == false) {\n                if(first)\n                    setTimeout(getVideo, 300000);\n                first = true;\n            } else {\n                if(first)\n                    setTimeout(getVideo, 600000);\n                first = true;\n            }\n            //}\n            timer.play();\n        }\n    });\n\n    $(\"#video-stop\").on('click', function() {\n        if($('.check_domain').val() === 'true') {\n            getVideo();\n        }\n    });\n\n    $('#play_back').on('click', function() {\n        if($('.check_domain').val() === 'true') {\n            $('#play_back').hide();\n            $('#video-pause').show();\n            var video = document.getElementById('video_watch');\n            video.play();\n        }\n    });\n    $('#video-pause').on('click', function() {\n        if($('.check_domain').val() === 'true') {\n            $('#play_back').show();\n            $('#video-pause').hide();\n            var video = document.getElementById('video_watch');\n            video.pause();\n        }\n    })\n    function getVideo() {\n        first = false;\n\n        if($('.check_domain').val() === 'true') {\n            $('.display_div').hide();\n            $('.display_div:nth-child(10)').show();\n        }\n\n        //if(!isFirefox) {\n        //    mediaRecorder.stop();\n        //} else {\n        recordRTC.stopRecording(function(videoURL) {\n            videoMessage = recordRTC.getBlob();\n        });\n        //}\n\n        timer.stop();\n\n        document.getElementById('video-pause').style.display    =   'none';\n        document.getElementById('video-stop').style.display     =   'none';\n        document.getElementById('capture').style.display        =   'inline-block';\n\n        //var fileType = 'video';\n        //var xhr = new XMLHttpRequest();\n\n        // todo check if i need this timeout\n        setTimeout(function() {\n            var formData = new FormData();\n            //if(!isFirefox) {\n                formData.append('audiofile', audioMessage);\n            //}\n            formData.append('videofile', videoMessage);\n            formData.append('length', message_length);\n\n            $(\"#videospanimg\").css(\"display\", \"inline-block\");\n\n            $.ajax({\n                method: \"POST\",\n                url: \"/messages/upload-file\",\n                data: formData,\n                processData: false,\n                contentType: false,\n            })\n            .complete(function(res) {\n                console.log('ajax complete: ', res);\n                $(\"#videospanimg\").css(\"display\", \"none\");\n                $('.btn-holder').show();\n\n                localStorage.message_length =   message_length;\n                localStorage.fileName       =   JSON.parse(res.responseText).file_name;\n                localStorage.file           =   videostorage + JSON.parse(res.responseText).file_name;\n                localStorage.id             =   JSON.parse(res.responseText).id;\n                console.log('show recording');\n                $('#video_watch').prop('src', localStorage.file);\n\n                document.getElementById('message_length').innerHTML =   localStorage.message_length;\n                document.getElementById(\"video_file_name\").value    =   localStorage.fileName;\n                document.getElementById(\"video_duration\").value     =   localStorage.message_length;\n                document.getElementById('video_token').value        =   localStorage.token;\n\n                seconds1        =   0;\n                seconds2        =   0;\n                minutes         =   0;\n                message_length  =   '0:00';\n            })\n            .error(function(err) {\n                console.log('ajax error: ', err);\n            });\n        }, 3000);\n    }\n} else {\n\n    console.log('load flash');\n    console.log('http is no longer supported by Voicestak, please use https instead of http');\n\n    /*\tSWFObject v2.2 <http://code.google.com/p/swfobject/>\n     is released under the MIT License <http://www.opensource.org/licenses/mit-license.php>\n     */\n   /* var swfobject = function(){\n        var D=\"undefined\",r=\"object\",S=\"Shockwave Flash\",W=\"ShockwaveFlash.ShockwaveFlash\",q=\"application/x-shockwave-flash\",R=\"SWFObjectExprInst\",x=\"onreadystatechange\",O=window,j=document,t=navigator,T=false,U=[h],o=[],N=[],I=[],l,Q,E,B,J=false,a=false,n,G,m=true,M=function(){var aa=typeof j.getElementById!=D&&typeof j.getElementsByTagName!=D&&typeof j.createElement!=D,ah=t.userAgent.toLowerCase(),Y=t.platform.toLowerCase(),ae=Y?/win/.test(Y):/win/.test(ah),ac=Y?/mac/.test(Y):/mac/.test(ah),af=/webkit/.test(ah)?parseFloat(ah.replace(/^.*webkit\\/(\\d+(\\.\\d+)?).*$/,\"$1\")):false,X=!+\"\\v1\",ag=[0,0,0],ab=null;if(typeof t.plugins!=D&&typeof t.plugins[S]==r){ab=t.plugins[S].description;if(ab&&!(typeof t.mimeTypes!=D&&t.mimeTypes[q]&&!t.mimeTypes[q].enabledPlugin)){T=true;X=false;ab=ab.replace(/^.*\\s+(\\S+\\s+\\S+$)/,\"$1\");ag[0]=parseInt(ab.replace(/^(.*)\\..*$/,\"$1\"),10);ag[1]=parseInt(ab.replace(/^.*\\.(.*)\\s.*$/,\"$1\"),10);ag[2]=/[a-zA-Z]/.test(ab)?parseInt(ab.replace(/^.*[a-zA-Z]+(.*)$/,\"$1\"),10):0}}else{if(typeof O.ActiveXObject!=D){try{var ad=new ActiveXObject(W);if(ad){ab=ad.GetVariable(\"$version\");if(ab){X=true;ab=ab.split(\" \")[1].split(\",\");ag=[parseInt(ab[0],10),parseInt(ab[1],10),parseInt(ab[2],10)]}}}catch(Z){}}}return{w3:aa,pv:ag,wk:af,ie:X,win:ae,mac:ac}}(),k=function(){if(!M.w3){return}if((typeof j.readyState!=D&&j.readyState==\"complete\")||(typeof j.readyState==D&&(j.getElementsByTagName(\"body\")[0]||j.body))){f()}if(!J){if(typeof j.addEventListener!=D){j.addEventListener(\"DOMContentLoaded\",f,false)}if(M.ie&&M.win){j.attachEvent(x,function(){if(j.readyState==\"complete\"){j.detachEvent(x,arguments.callee);f()}});if(O==top){(function(){if(J){return}try{j.documentElement.doScroll(\"left\")}catch(X){setTimeout(arguments.callee,0);return}f()})()}}if(M.wk){(function(){if(J){return}if(!/loaded|complete/.test(j.readyState)){setTimeout(arguments.callee,0);return}f()})()}s(f)}}();function f(){if(J){return}try{var Z=j.getElementsByTagName(\"body\")[0].appendChild(C(\"span\"));Z.parentNode.removeChild(Z)}catch(aa){return}J=true;var X=U.length;for(var Y=0;Y<X;Y++){U[Y]()}}function K(X){if(J){X()}else{U[U.length]=X}}function s(Y){if(typeof O.addEventListener!=D){O.addEventListener(\"load\",Y,false)}else{if(typeof j.addEventListener!=D){j.addEventListener(\"load\",Y,false)}else{if(typeof O.attachEvent!=D){i(O,\"onload\",Y)}else{if(typeof O.onload==\"function\"){var X=O.onload;O.onload=function(){X();Y()}}else{O.onload=Y}}}}}function h(){if(T){V()}else{H()}}function V(){var X=j.getElementsByTagName(\"body\")[0];var aa=C(r);aa.setAttribute(\"type\",q);var Z=X.appendChild(aa);if(Z){var Y=0;(function(){if(typeof Z.GetVariable!=D){var ab=Z.GetVariable(\"$version\");if(ab){ab=ab.split(\" \")[1].split(\",\");M.pv=[parseInt(ab[0],10),parseInt(ab[1],10),parseInt(ab[2],10)]}}else{if(Y<10){Y++;setTimeout(arguments.callee,10);return}}X.removeChild(aa);Z=null;H()})()}else{H()}}function H(){var ag=o.length;if(ag>0){for(var af=0;af<ag;af++){var Y=o[af].id;var ab=o[af].callbackFn;var aa={success:false,id:Y};if(M.pv[0]>0){var ae=c(Y);if(ae){if(F(o[af].swfVersion)&&!(M.wk&&M.wk<312)){w(Y,true);if(ab){aa.success=true;aa.ref=z(Y);ab(aa)}}else{if(o[af].expressInstall&&A()){var ai={};ai.data=o[af].expressInstall;ai.width=ae.getAttribute(\"width\")||\"0\";ai.height=ae.getAttribute(\"height\")||\"0\";if(ae.getAttribute(\"class\")){ai.styleclass=ae.getAttribute(\"class\")}if(ae.getAttribute(\"align\")){ai.align=ae.getAttribute(\"align\")}var ah={};var X=ae.getElementsByTagName(\"param\");var ac=X.length;for(var ad=0;ad<ac;ad++){if(X[ad].getAttribute(\"name\").toLowerCase()!=\"movie\"){ah[X[ad].getAttribute(\"name\")]=X[ad].getAttribute(\"value\")}}P(ai,ah,Y,ab)}else{p(ae);if(ab){ab(aa)}}}}}else{w(Y,true);if(ab){var Z=z(Y);if(Z&&typeof Z.SetVariable!=D){aa.success=true;aa.ref=Z}ab(aa)}}}}}function z(aa){var X=null;var Y=c(aa);if(Y&&Y.nodeName==\"OBJECT\"){if(typeof Y.SetVariable!=D){X=Y}else{var Z=Y.getElementsByTagName(r)[0];if(Z){X=Z}}}return X}function A(){return !a&&F(\"6.0.65\")&&(M.win||M.mac)&&!(M.wk&&M.wk<312)}function P(aa,ab,X,Z){a=true;E=Z||null;B={success:false,id:X};var ae=c(X);if(ae){if(ae.nodeName==\"OBJECT\"){l=g(ae);Q=null}else{l=ae;Q=X}aa.id=R;if(typeof aa.width==D||(!/%$/.test(aa.width)&&parseInt(aa.width,10)<310)){aa.width=\"310\"}if(typeof aa.height==D||(!/%$/.test(aa.height)&&parseInt(aa.height,10)<137)){aa.height=\"137\"}j.title=j.title.slice(0,47)+\" - Flash Player Installation\";var ad=M.ie&&M.win?\"ActiveX\":\"PlugIn\",ac=\"MMredirectURL=\"+O.location.toString().replace(/&/g,\"%26\")+\"&MMplayerType=\"+ad+\"&MMdoctitle=\"+j.title;if(typeof ab.flashvars!=D){ab.flashvars+=\"&\"+ac}else{ab.flashvars=ac}if(M.ie&&M.win&&ae.readyState!=4){var Y=C(\"div\");X+=\"SWFObjectNew\";Y.setAttribute(\"id\",X);ae.parentNode.insertBefore(Y,ae);ae.style.display=\"none\";(function(){if(ae.readyState==4){ae.parentNode.removeChild(ae)}else{setTimeout(arguments.callee,10)}})()}u(aa,ab,X)}}function p(Y){if(M.ie&&M.win&&Y.readyState!=4){var X=C(\"div\");Y.parentNode.insertBefore(X,Y);X.parentNode.replaceChild(g(Y),X);Y.style.display=\"none\";(function(){if(Y.readyState==4){Y.parentNode.removeChild(Y)}else{setTimeout(arguments.callee,10)}})()}else{Y.parentNode.replaceChild(g(Y),Y)}}function g(ab){var aa=C(\"div\");if(M.win&&M.ie){aa.innerHTML=ab.innerHTML}else{var Y=ab.getElementsByTagName(r)[0];if(Y){var ad=Y.childNodes;if(ad){var X=ad.length;for(var Z=0;Z<X;Z++){if(!(ad[Z].nodeType==1&&ad[Z].nodeName==\"PARAM\")&&!(ad[Z].nodeType==8)){aa.appendChild(ad[Z].cloneNode(true))}}}}}return aa}function u(ai,ag,Y){var X,aa=c(Y);if(M.wk&&M.wk<312){return X}if(aa){if(typeof ai.id==D){ai.id=Y}if(M.ie&&M.win){var ah=\"\";for(var ae in ai){if(ai[ae]!=Object.prototype[ae]){if(ae.toLowerCase()==\"data\"){ag.movie=ai[ae]}else{if(ae.toLowerCase()==\"styleclass\"){ah+=' class=\"'+ai[ae]+'\"'}else{if(ae.toLowerCase()!=\"classid\"){ah+=\" \"+ae+'=\"'+ai[ae]+'\"'}}}}}var af=\"\";for(var ad in ag){if(ag[ad]!=Object.prototype[ad]){af+='<param name=\"'+ad+'\" value=\"'+ag[ad]+'\" />'}}aa.outerHTML='<object classid=\"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000\"'+ah+\">\"+af+\"</object>\";N[N.length]=ai.id;X=c(ai.id)}else{var Z=C(r);Z.setAttribute(\"type\",q);for(var ac in ai){if(ai[ac]!=Object.prototype[ac]){if(ac.toLowerCase()==\"styleclass\"){Z.setAttribute(\"class\",ai[ac])}else{if(ac.toLowerCase()!=\"classid\"){Z.setAttribute(ac,ai[ac])}}}}for(var ab in ag){if(ag[ab]!=Object.prototype[ab]&&ab.toLowerCase()!=\"movie\"){e(Z,ab,ag[ab])}}aa.parentNode.replaceChild(Z,aa);X=Z}}return X}function e(Z,X,Y){var aa=C(\"param\");aa.setAttribute(\"name\",X);aa.setAttribute(\"value\",Y);Z.appendChild(aa)}function y(Y){var X=c(Y);if(X&&X.nodeName==\"OBJECT\"){if(M.ie&&M.win){X.style.display=\"none\";(function(){if(X.readyState==4){b(Y)}else{setTimeout(arguments.callee,10)}})()}else{X.parentNode.removeChild(X)}}}function b(Z){var Y=c(Z);if(Y){for(var X in Y){if(typeof Y[X]==\"function\"){Y[X]=null}}Y.parentNode.removeChild(Y)}}function c(Z){var X=null;try{X=j.getElementById(Z)}catch(Y){}return X}function C(X){return j.createElement(X)}function i(Z,X,Y){Z.attachEvent(X,Y);I[I.length]=[Z,X,Y]}function F(Z){var Y=M.pv,X=Z.split(\".\");X[0]=parseInt(X[0],10);X[1]=parseInt(X[1],10)||0;X[2]=parseInt(X[2],10)||0;return(Y[0]>X[0]||(Y[0]==X[0]&&Y[1]>X[1])||(Y[0]==X[0]&&Y[1]==X[1]&&Y[2]>=X[2]))?true:false}function v(ac,Y,ad,ab){if(M.ie&&M.mac){return}var aa=j.getElementsByTagName(\"head\")[0];if(!aa){return}var X=(ad&&typeof ad==\"string\")?ad:\"screen\";if(ab){n=null;G=null}if(!n||G!=X){var Z=C(\"style\");Z.setAttribute(\"type\",\"text/css\");Z.setAttribute(\"media\",X);n=aa.appendChild(Z);if(M.ie&&M.win&&typeof j.styleSheets!=D&&j.styleSheets.length>0){n=j.styleSheets[j.styleSheets.length-1]}G=X}if(M.ie&&M.win){if(n&&typeof n.addRule==r){n.addRule(ac,Y)}}else{if(n&&typeof j.createTextNode!=D){n.appendChild(j.createTextNode(ac+\" {\"+Y+\"}\"))}}}function w(Z,X){if(!m){return}var Y=X?\"visible\":\"hidden\";if(J&&c(Z)){c(Z).style.visibility=Y}else{v(\"#\"+Z,\"visibility:\"+Y)}}function L(Y){var Z=/[\\\\\\\"<>\\.;]/;var X=Z.exec(Y)!=null;return X&&typeof encodeURIComponent!=D?encodeURIComponent(Y):Y}var d=function(){if(M.ie&&M.win){window.attachEvent(\"onunload\",function(){var ac=I.length;for(var ab=0;ab<ac;ab++){I[ab][0].detachEvent(I[ab][1],I[ab][2])}var Z=N.length;for(var aa=0;aa<Z;aa++){y(N[aa])}for(var Y in M){M[Y]=null}M=null;for(var X in swfobject){swfobject[X]=null}swfobject=null})}}();return{registerObject:function(ab,X,aa,Z){if(M.w3&&ab&&X){var Y={};Y.id=ab;Y.swfVersion=X;Y.expressInstall=aa;Y.callbackFn=Z;o[o.length]=Y;w(ab,false)}else{if(Z){Z({success:false,id:ab})}}},getObjectById:function(X){if(M.w3){return z(X)}},embedSWF:function(ab,ah,ae,ag,Y,aa,Z,ad,af,ac){var X={success:false,id:ah};if(M.w3&&!(M.wk&&M.wk<312)&&ab&&ah&&ae&&ag&&Y){w(ah,false);K(function(){ae+=\"\";ag+=\"\";var aj={};if(af&&typeof af===r){for(var al in af){aj[al]=af[al]}}aj.data=ab;aj.width=ae;aj.height=ag;var am={};if(ad&&typeof ad===r){for(var ak in ad){am[ak]=ad[ak]}}if(Z&&typeof Z===r){for(var ai in Z){if(typeof am.flashvars!=D){am.flashvars+=\"&\"+ai+\"=\"+Z[ai]}else{am.flashvars=ai+\"=\"+Z[ai]}}}if(F(Y)){var an=u(aj,am,ah);if(aj.id==ah){w(ah,true)}X.success=true;X.ref=an}else{if(aa&&A()){aj.data=aa;P(aj,am,ah,ac);return}else{w(ah,true)}}if(ac){ac(X)}})}else{if(ac){ac(X)}}},switchOffAutoHideShow:function(){m=false},ua:M,getFlashPlayerVersion:function(){return{major:M.pv[0],minor:M.pv[1],release:M.pv[2]}},hasFlashPlayerVersion:F,createSWF:function(Z,Y,X){if(M.w3){return u(Z,Y,X)}else{return undefined}},showExpressInstall:function(Z,aa,X,Y){if(M.w3&&A()){P(Z,aa,X,Y)}},removeSWF:function(X){if(M.w3){y(X)}},createCSS:function(aa,Z,Y,X){if(M.w3){v(aa,Z,Y,X)}},addDomLoadEvent:K,addLoadEvent:s,getQueryParamValue:function(aa){var Z=j.location.search||j.location.hash;if(Z){if(/\\?/.test(Z)){Z=Z.split(\"?\")[1]}if(aa==null){return L(Z)}var Y=Z.split(\"&\");for(var X=0;X<Y.length;X++){if(Y[X].substring(0,Y[X].indexOf(\"=\"))==aa){return L(Y[X].substring((Y[X].indexOf(\"=\")+1)))}}}return\"\"},expressInstallCallback:function(){if(a){var X=c(R);if(X&&l){X.parentNode.replaceChild(l,X);if(Q){w(Q,true);if(M.ie&&M.win){l.style.display=\"block\"}}if(E){E(B)}}a=false}}}}();\n\n    console.log('line 5912');\n\n    $('.videoFlash').on('click' , function() {\n        $.each( $('script'), function( key, value ) {\n            if($(value).attr('src') == '/assets/js/flash-recorder.js') {\n                $(this).remove();\n            }\n\n            if($(value).attr('src') == '/assets/js/flash_audioRecorder.js') {\n                $(this).remove();\n            }\n        });\n\n        var script_flash  = document.createElement('script');\n        script_flash.type = \"text/javascript\";\n        script_flash.src  = \"/assets/js/flash-recorder.js\";\n        document.getElementsByTagName('body')[0].appendChild(script_flash);\n    });\n\n    $('.audioFlash').on('click' , function() {\n        $.each( $('script'), function( key, value ) {\n            if($(value).attr('src') == '/assets/js/flash-recorder.js') {\n                $(this).remove();\n            }\n\n            if($(value).attr('src') == '/assets/js/flash_audioRecorder.js') {\n                $(this).remove();\n            }\n        });\n\n        var script_audio  = document.createElement('script');\n        script_audio.type = \"text/javascript\";\n        script_audio.src  = \"/assets/js/flash_audioRecorder.js\";\n        document.getElementsByTagName('body')[0].appendChild(script_audio);\n    });*/\n\n}\n\n\n\n// Credit to Ludwig: http://stackoverflow.com/questions/9514179/how-to-find-the-operating-system-version-using-javascript\n(function (window) {\n    {\n        var unknown = ' ';\n\n        // screen\n        var screenSize = '';\n        if (screen.width) {\n            var width = (screen.width) ? screen.width : '';\n            var height = (screen.height) ? screen.height : '';\n            screenSize += '' + width + \" x \" + height;\n        }\n\n        // browser\n        var nVer = navigator.appVersion;\n        var nAgt = navigator.userAgent;\n        var browser = navigator.appName;\n        var version = '' + parseFloat(navigator.appVersion);\n        var majorVersion = parseInt(navigator.appVersion, 10);\n        var nameOffset, verOffset, ix;\n\n        // Opera\n        if ((verOffset = nAgt.indexOf('Opera')) != -1) {\n            browser = 'Opera';\n            version = nAgt.substring(verOffset + 6);\n            if ((verOffset = nAgt.indexOf('Version')) != -1) {\n                version = nAgt.substring(verOffset + 8);\n            }\n        }\n        // Opera Next\n        if ((verOffset = nAgt.indexOf('OPR')) != -1) {\n            browser = 'Opera';\n            version = nAgt.substring(verOffset + 4);\n        }\n        // MSIE\n        else if ((verOffset = nAgt.indexOf('MSIE')) != -1) {\n            browser = 'Microsoft Internet Explorer';\n            version = nAgt.substring(verOffset + 5);\n        }\n        // Chrome\n        else if ((verOffset = nAgt.indexOf('Chrome')) != -1) {\n            browser = 'Chrome';\n            version = nAgt.substring(verOffset + 7);\n        }\n        // Safari\n        else if ((verOffset = nAgt.indexOf('Safari')) != -1) {\n            browser = 'Safari';\n            version = nAgt.substring(verOffset + 7);\n            if ((verOffset = nAgt.indexOf('Version')) != -1) {\n                version = nAgt.substring(verOffset + 8);\n            }\n        }\n        // Firefox\n        else if ((verOffset = nAgt.indexOf('Firefox')) != -1) {\n            browser = 'Firefox';\n            version = nAgt.substring(verOffset + 8);\n        }\n        // MSIE 11+\n        else if (nAgt.indexOf('Trident/') != -1) {\n            browser = 'Microsoft Internet Explorer';\n            version = nAgt.substring(nAgt.indexOf('rv:') + 3);\n        }\n        // Other browsers\n        else if ((nameOffset = nAgt.lastIndexOf(' ') + 1) < (verOffset = nAgt.lastIndexOf('/'))) {\n            browser = nAgt.substring(nameOffset, verOffset);\n            version = nAgt.substring(verOffset + 1);\n            if (browser.toLowerCase() == browser.toUpperCase()) {\n                browser = navigator.appName;\n            }\n        }\n        // trim the version string\n        if ((ix = version.indexOf(';')) != -1) version = version.substring(0, ix);\n        if ((ix = version.indexOf(' ')) != -1) version = version.substring(0, ix);\n        if ((ix = version.indexOf(')')) != -1) version = version.substring(0, ix);\n\n        majorVersion = parseInt('' + version, 10);\n        if (isNaN(majorVersion)) {\n            version = '' + parseFloat(navigator.appVersion);\n            majorVersion = parseInt(navigator.appVersion, 10);\n        }\n\n        // mobile version\n        var mobile = /Mobile|mini|Fennec|Android|iP(ad|od|hone)/.test(nVer);\n\n        // cookie\n        var cookieEnabled = (navigator.cookieEnabled) ? true : false;\n\n        if (typeof navigator.cookieEnabled == 'undefined' && !cookieEnabled) {\n            document.cookie = 'testcookie';\n            cookieEnabled = (document.cookie.indexOf('testcookie') != -1) ? true : false;\n        }\n\n        // system\n        var os = unknown;\n        var clientStrings = [\n            {s:'Windows 10', r:/(Windows 10.0|Windows NT 10.0)/},\n            {s:'Windows 8.1', r:/(Windows 8.1|Windows NT 6.3)/},\n            {s:'Windows 8', r:/(Windows 8|Windows NT 6.2)/},\n            {s:'Windows 7', r:/(Windows 7|Windows NT 6.1)/},\n            {s:'Windows Vista', r:/Windows NT 6.0/},\n            {s:'Windows Server 2003', r:/Windows NT 5.2/},\n            {s:'Windows XP', r:/(Windows NT 5.1|Windows XP)/},\n            {s:'Windows 2000', r:/(Windows NT 5.0|Windows 2000)/},\n            {s:'Windows ME', r:/(Win 9x 4.90|Windows ME)/},\n            {s:'Windows 98', r:/(Windows 98|Win98)/},\n            {s:'Windows 95', r:/(Windows 95|Win95|Windows_95)/},\n            {s:'Windows NT 4.0', r:/(Windows NT 4.0|WinNT4.0|WinNT|Windows NT)/},\n            {s:'Windows CE', r:/Windows CE/},\n            {s:'Windows 3.11', r:/Win16/},\n            {s:'Android', r:/Android/},\n            {s:'Open BSD', r:/OpenBSD/},\n            {s:'Sun OS', r:/SunOS/},\n            {s:'Linux', r:/(Linux|X11)/},\n            {s:'iOS', r:/(iPhone|iPad|iPod)/},\n            {s:'Mac OS X', r:/Mac OS X/},\n            {s:'Mac OS', r:/(MacPPC|MacIntel|Mac_PowerPC|Macintosh)/},\n            {s:'QNX', r:/QNX/},\n            {s:'UNIX', r:/UNIX/},\n            {s:'BeOS', r:/BeOS/},\n            {s:'OS/2', r:/OS\\/2/},\n            {s:'Search Bot', r:/(nuhk|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask Jeeves\\/Teoma|ia_archiver)/}\n        ];\n        for (var id in clientStrings) {\n            var cs = clientStrings[id];\n            if (cs.r.test(nAgt)) {\n                os = cs.s;\n                break;\n            }\n        }\n\n        var osVersion = unknown;\n\n        if (/Windows/.test(os)) {\n            osVersion = /Windows (.*)/.exec(os)[1];\n            os = 'Windows';\n        }\n\n        switch (os) {\n            case 'Mac OS X':\n                osVersion = /Mac OS X (10[\\.\\_\\d]+)/.exec(nAgt)[1];\n                break;\n\n            case 'Android':\n                osVersion = /Android ([\\.\\_\\d]+)/.exec(nAgt)[1];\n                break;\n\n            case 'iOS':\n                osVersion = /OS (\\d+)_(\\d+)_?(\\d+)?/.exec(nVer);\n                osVersion = osVersion[1] + '.' + osVersion[2] + '.' + (osVersion[3] | 0);\n                break;\n        }\n\n        // flash (you'll need to include swfobject)\n        /* script src=\"//ajax.googleapis.com/ajax/libs/swfobject/2.2/swfobject.js\" */\n        var flashVersion = 'no check';\n        if (typeof swfobject != 'undefined') {\n            var fv = swfobject.getFlashPlayerVersion();\n            if (fv.major > 0) {\n                flashVersion = fv.major + '.' + fv.minor + ' r' + fv.release;\n            }\n            else  {\n                flashVersion = unknown;\n            }\n        }\n    }\n\n    window.jscd = {\n        screen: screenSize,\n        browser: browser,\n        browserVersion: version,\n        browserMajorVersion: majorVersion,\n        mobile: mobile,\n        os: os,\n        osVersion: osVersion,\n        cookies: cookieEnabled,\n        flashVersion: flashVersion\n    };\n}(this));"]}